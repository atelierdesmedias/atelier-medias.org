# Installation

## Dépendances

Pour faire tourner le projet sur une machine, cette-ci doit avoir d'installé :
- serveur apache
- serveur PHP 7.1.3
- [serveur mysql 5.7](https://www.mysql.com)
- [composer](https://getcomposer.org)
- [nodejs](https://nodejs.org)
- [yarn](https://yarnpkg.com) 
- [git](https://git-scm.com)

## Procédure d'installation

1. Start du serveur local apache et PHP (avec [MAMP](https://www.mamp.info/en/downloads/) par exemple)

1. Créer un dossier nommé "adm" (ou whatever...) puis cloner le projet dedans.

     ```shell
     // se déplacer dans le dossier 
     $ cd mon-dossier-adm/ 
     
     // cloner le repos
     $ git clone https://github.com/atelierdesmedias/atelier-medias.org.git
     ```
 
1. Installer les dépendances node

    ```shell
    $ yarn install
    ``` 

1. Installer des dependances PHP avec composer (Wordpress et ses plugins associés sont installés via composer -> propre !)   

    ```shell
    // se déplacer dans le dossier dist
    $ cd dist/
    
    // installer wordpress et ses plugins
    $ composer install
    ``` 

1. Installer la base de donnée mysql `admwp.sql` présent dans le root du repos sur votre serveur mysql.

1. Depuis le root du projet `./`, créer un ficher d'environnement (ce dernier permet entre autre, 
de définir des variables d'environnements comme la base url).
    
    ```shell
    $ node solid creatEnv
    ```
    
    Un fichier de propriété relatif à l'environement créé apparait dans [src/env/](../src/env). 
    Configurer les propriétés d'environnement local.
       
    ```shell
    properties/                                                                
    │── .envName.js                # → contient le nom de l'environement défini
    └── myname.properties.js       # → contient les propriétés de l'environnement nommé...   
    ```
    
1. Lancer l'environement de développement 
 
   ```shell
   // lancer webpack + devServer + hot reload
   $ node solid dev
          
